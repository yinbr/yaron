<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.org/ui"
	template="/pages/common/layout2.xhtml">

	<!--  THE MAIN AREA -->
	<ui:define name="mainArea">
		<h:form id="mainAreaFrm">
			<rich:messages ajaxRendered="true"></rich:messages>
			
			<div align="center" >
			   <rich:dataTable id="usersTable" var="user" value="#{userDetailsAction.users}">
				   	<rich:column>
	                    <f:facet name="header">
	                        <h:outputText value="User name " />
	                    </f:facet>
		                <h:outputText value="#{user.userName}" />
		            </rich:column>
				   	
				   	<rich:column>
	                    <f:facet name="header">
	                        <h:outputText value="first name" />
	                    </f:facet>
		                <h:outputText value="#{user.firstName}" />
		            </rich:column>
				   	
				   		<rich:column>
	                    <f:facet name="header">
	                        <h:outputText value="last name" />
	                    </f:facet>
		                <h:outputText value="#{user.lastName}" />
		            </rich:column>
				   	
				   	<rich:column>
	                    <f:facet name="header">
	                        <h:outputText value="role" />
	                    </f:facet>
		                <h:outputText value="#{user.role}" />
		            </rich:column>
		            
				   	<rich:column>
				   		<f:facet name="header">
	                        <h:outputText value="Action " />
	                    </f:facet>
				   		<a4j:commandLink id="link" actionListener="#{userDetailsAction.setSelectedUser(user)}" 
				   			oncomplete="#{rich:component('userDetails')}.show(); return false;" render="userDetails">
					        <h:outputText value="edit" />
					    </a4j:commandLink>
	
					</rich:column>
			   	
			   </rich:dataTable>
			</div>
			
			<a4j:commandButton id="newUser" actionListener="#{userDetailsAction.createNewUser}">	
				
			
			
			</a4j:commandButton>
			
			<rich:popupPanel id="userDetails" modal="true" width="400" height="200" autosized="true" resizeable="false">
		        <f:facet name="header"> 
		            <h:outputText value="User details" />
		        </f:facet>
		        <f:facet name="controls">
		            <h:outputLink value="#" onclick="#{rich:component('userDetails')}.hide(); return false;" style="color: inherit">
		                X
		            </h:outputLink>
		        </f:facet>
		        	
		        	<h:panelGrid columns="2">
		        		
		        		<h:column>
			        		<h:inputText value="#{userDetailsAction.selectedUser.userName}"></h:inputText>
		        		</h:column>
		        		<h:column>
			        		<h:outputLabel value="שם משתמש " />
		        		</h:column>
		        		
		        		
		        		<h:column></h:column>	
		        		<h:column>
		        			<a4j:commandButton id="saveUser" value="Save" actionListener="#{userDetailsAction.createNewUser}"
		        			render="usersTable">	
				
			
			
							</a4j:commandButton>
		        		</h:column>
		        	
		        	</h:panelGrid>
   
		        
		    </rich:popupPanel>
			
				
			
			
		</h:form>
	</ui:define>
</ui:composition>